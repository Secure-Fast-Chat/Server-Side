CREATE USER fasty with PASSWORD 'pass123';
CREATE DATABASE mydb;
GRANT ALL PRIVILEGES ON DATABASE mydb TO fasty;
\c mydb fasty
CREATE TABLE IF NOT EXISTS Users(
    NAME TEXT UNIQUE NOT NULL, 
    PASSWORD TEXT NOT NULL, 
    E2EPUBLICKEY TEXT NOT NULL
    );
CREATE TABLE IF NOT EXISTS MESSAGES(
    SENDER TEXT NOT NULL,
    RECEIVER TEXT NOT NULL,
    FOREIGN KEY(SENDER) REFERENCES USERS(NAME), 
    FOREIGN KEY(RECEIVER) REFERENCES USERS(NAME), 
    MESSAGE TEXT NOT NULL, 
    TIMESTAMP FLOAT NOT NULL, 
    CONTENTTYPE TEXT NOT NULL
);
CREATE TABLE IF NOT EXISTS GROUPS (
    GROUPNAME TEXT NOT NULL, 
    CREATOR TEXT NOT NULL,
    FOREIGN KEY(CREATOR) REFERENCES USERS(NAME),
    CREATORKEY TEXT NOT NULL,
    PRIMARY KEY(GROUPNAME)
    );
CREATE TABLE IF NOT EXISTS GROUPMEMBERS (
    GROUPNAME TEXT NOT NULL,
    FOREIGN KEY(GROUPNAME) REFERENCES GROUPS(GROUPNAME), 
    KEY TEXT NOT NULL, 
    USERNAME TEXT NOT NULL,
    FOREIGN KEY(USERNAME) REFERENCES USERS(NAME)
    );